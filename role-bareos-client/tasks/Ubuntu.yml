---
- name: Add Bareos GPG Key
  apt_key:
    url: "{{ bareos_url_ubuntu }}/Release.key"
    state: present
#  loop:
#    - http://download.bareos.org/bareos/release/18.2/Release.gpg

- name: Add Bareos Repository
  apt_repository:
    repo: "deb {{ bareos_url_ubuntu }} /"
    state: present
  loop:

- name: update apt cache
  apt:
    update_cache: yes

- name: Install Bareos Client
  apt:
    name: "{{ ubuntu_pkgs }}"

# - name: Template Client Configuration
#   template:
#     src: .j2
#     dest:
#     owner:
#     group: bareos
#     mode: 640



# - name: Download DEB packages
#   get_url:
#     url: "{{ item.url }}"
#     dest: "{{ item.dest }}"
#   loop:
#     - { url: 'https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb', dest: '/opt/' }
#     - { url: 'https://github.com/meetfranz/franz/releases/download/v5.1.0/franz_5.1.0_amd64.deb', dest: '/opt/' }

# - name: Install a .deb package
#   apt:
#     deb: /opt/{{ item }}
#   loop:
#     - google-chrome-stable_current_amd64.deb
#     - franz_5.1.0_amd64.deb

# - name: install pip modules
#   pip:
#     name: "{{ item }}"
#   loop:
#     - docker
#     - boto
#     - boto3
#     - botocore
